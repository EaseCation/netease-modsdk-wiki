---
title: 延迟渲染技术预览问答
mentions:
    - SmokeyStack
---

# 延迟渲染技术预览问答 2024/02/23

<!--@include: @/wiki/bedrock-wiki-mirror.md-->

本次问答活动在[Bedrock附加组件Discord](https://discord.gg/uZF75ZxcJq)进行。六位Mojang/Microsoft员工加入我们，就延迟技术预览API相关问题进行解答。问题均来自社区征集。

:::warning
并非所有消息都被完整转录，部分内容经过编辑。如需查看完整记录，请加入上述Discord服务器并获取"活动档案"身份组。
:::

## 延迟渲染管线的开发历时

- **问**：延迟渲染管线的开发历时多久？开发过程中遇到了哪些挑战？
- **答**：延迟渲染管线自2020年起以不同形式进行开发。部分技术源自RTX管线的优化，另一些则源自《我的世界：传奇》项目。2022年3月正式启动全面开发。

## 支持平台

- **问**：是否有不支持的平台？
- **答**：目前尚无官方声明。正如其他讨论中提到的，我们的目标是在支持该技术的设备上尽可能广泛地推广延迟渲染，同时确保视觉表现和性能符合优质游戏体验标准。

- **问**：我主要在手机上玩Minecraft，光线追踪和着色器效果看起来很酷！但从未体验过😞 延迟光照会支持安卓设备吗？
- **答**：支持！目前安卓用户可通过测试版程序体验延迟预览功能，Xbox、iOS和PC平台的预览版也已同步开放。

- **问**：Chromebook能运行延迟渲染吗？
- **答**：目前没有新增平台计划，但我们正在积极测试并研究如何扩展支持平台。既要让更多玩家体验新技术，也要确保游戏体验的稳定性。

## Molang在延迟渲染中的应用

- **问**：能否在global.json等文件中使用Molang查询？这对检测特定月相和创建本地化/独特体验很有帮助！
- **答**：感谢建议，但目前没有Molang整合计划。我们需要谨慎处理延迟渲染的性能限制等问题。

## 剩余功能开发

- **问**：延迟渲染还有多少待开发功能？
- **答**：其他讨论中已有暗示，这里做个速查表😉 
    目前正在开发中的功能包括：色彩分级、水体光照+运动模拟、次表面散射、反射效果、物品与粒子的纹理集支持。

## 性能优化

- **问**：延迟渲染的优化何时开始？听说要等所有功能实现后才启动优化？
- **答**：AJ的说法正确，我们确实需要先完成功能开发再集中优化。暂无具体时间表，但已列入路线图！

## 视差遮蔽映射效果

- **问**：会添加视差遮蔽映射（POM）等效果吗？
- **答**：目前没有关于POM技术的计划，感谢建议！

## 延迟PBR扩展

- **问**：是否会扩展延迟PBR功能（如次表面散射、孔隙率、曲面细分等）？
- **答**：部分问题已回答：https://discord.com/channels/523663022053392405/1209533667224068188/1210658737103048805
- **答**：是的！我们将扩展当前模型以包含次表面散射近似算法，并为水体几何创建独特光照模型。水体将根据藻类含量等属性呈现不同效果。

- **问**："水体独特光照模型"是否包含方块曲面细分？
- **答**：目前没有曲面细分相关计划，感谢建议！

## 超级画质包取消原因

- **问**：为何取消超级画质包开发？
- **答**：该[链接](https://www.minecraft.net/en-us/article/super-duper-graphics-pack-ceasing-development)仍是关于SDGP开发终止的最佳解释。

## 数据驱动渲染器目录

- **问**：是否会开放渲染器目录供资源包使用？这将极大扩展创作者实验空间。
- **答**：不会直接开放目录，但会逐步开放更多数据驱动功能供资源包调用。

## 最诡异BUG集锦

- **问**：开发延迟渲染管线时遇到过哪些奇葩渲染BUG？
- **答**：早期镜面反射间接光照实验曾导致整个场景过曝！![](/assets/images/visuals/deferred-qna/deferred-qna-media1.gif)
- **答**：遇到过NaN（非数）污染并扩散的现象。朋友们，永远不要除以零😉 ![](/assets/images/visuals/deferred-qna/deferred-qna-media2.png)
- **答**：猜猜这是哪个~~宝可梦~~ Minecraft生物？![](/assets/images/visuals/deferred-qna/deferred-qna-media3.png)
- **答**：虽然没有截图，但曾出现世界另一端的生物幻影投射阴影！起初以为是隐身生物，后来发现对应生物竟在数千方块之外！最终定位是坐标系转换问题，这个BUG追踪过程非常有趣。

## 光源对比度与饱和度控制

- **问**：是否会为所有光源添加对比度/饱和度控制？目前阳光颜色显得过于平淡。
- **答**：不会单独控制每个光源，但会通过色调映射实现全局调节。我们正在开发完整的HDR色彩分级套件，包含对比度、饱和度、增益、偏移和分色调等参数，这些功能将通过资源包实现数据驱动。

## 焦点参数

- **问**：是否会为物体添加焦点模式？
- **答**：暂无相机相关功能计划，感谢建议！

## 可定制云层

- **问**：当前延迟渲染的云层定制性有限，是否计划添加体积云？
- **答**：暂无云层相关计划，但感谢建议！
 
- **问**：是否会支持多云层配置（类似SDGP）？
- **答**：感谢建议！目前没有云层相关更新计划

## 延迟渲染脚本化

- **问**：客户端API发布后，是否计划通过脚本控制延迟渲染？
- **答**：类似Molang问题的答复：需优先考虑性能限制等因素，暂无相关计划。

## 全局光照

- **问**：是否有全局光照（GI）计划？比如更精确的天光反射或环境光遮蔽。
- **答**：GI是个广泛概念，技术上来说答案是肯定的！具体来说，我们正在开发基于图像照明（IBL）和屏幕空间的反射系统。内部讨论过多种GI形式，但暂无其他实施方案可公布。

## 图形团队资源分配

- **问**：图形团队是否全力投入DRP开发？基础RenderDragon引擎仍有诸多BUG需要修复。
- **答**：不。图形团队同时负责DTP、RenderDragon引擎维护和核心游戏渲染。但有专门工程师组全职负责DTP开发。

## 精确天空模型

- **问**：当前天空模型拼接方式在延迟渲染中表现不佳，是否有改进计划？
- **答**：感谢反馈！我们确实有多个天空视觉效果需要优化。

## 原创图形技术

- **问**：是否开发过原创渲染技术？比如延迟大气是否独创？
- **答**：多数技术基于Siggraph/GDC等会议论文，但进行了Minecraft特色化改造（如光照衰减方式与原版一致）。在下界/末地等维度有机会开发独特方案，但目前无可分享内容。

## 延迟升频技术

- **问**：是否考虑添加FSR/XeSS等升频技术和锐化滑块？
- **答**：感谢建议！这对性能提升很有价值，我们会纳入考虑范围。

## 水体增强

- **问**：当前水体效果较基础，是否会添加屏幕空间反射、焦散、波浪等效果？
- **答**：是的！我们正在更新水体光照模型，焦散、噪波、体积光线、反射折射等效果已在路线图中。

- **问**：会考虑添加斯涅尔窗效应吗？
- **答**：当然😉

## 物品材质支持

- **问**：物品何时能获得官方PBR支持？目前只能通过附加物等变通方案实现。
- **答**：正在开发中！粒子系统的PBR支持可能会更早实现。

## 资源包单独开关

- **问**：能否为每个资源包添加延迟渲染开关？方便低配设备用户。
- **答**：延迟渲染资源包将遵循常规资源包叠加规则，高层级包覆盖底层属性，您描述的行为正确。

## 体积雾高度BUG

- **问**：高度参数体积雾在进入生物群系时会异常增厚，这是设定还是BUG？
- **答**：生物群系过渡插值目前不够完善（您描述的应是BUG），我们将在正式版前优化过渡效果。

## 实体光源

- **问**：是否计划为实体添加聚光灯/点光源？（想象《致命公司》式手电筒穿透迷雾！）
- **答**：暂无为实体添加光源的计划，感谢建议！

## 延迟渲染可定制性

- **问**：正式版会开放多少配置文件？期待更多光照/渲染参数自定义。
- **答**：虽不会完全开放，但会逐步扩展数据驱动接口。您最希望开放哪些具体配置？

## 资源包热重载

- **问**：基岩版会添加F3+T式资源包重载功能吗？Java版早已实现。
- **答**：我们清楚当前重载流程不便，但暂无公告。编辑器模式可能优先支持部分重载功能。

## 标识符驱动配置

- **问**：建议添加标识符驱动的光照配置，方便通过命令切换（示例代码）：

::: code-group
```json [示例配置]
{
  "format_version": "1.20.80",
  "minecraft:directional_lights": {
    "description": {"identifier": "bao:world_destroyer_event"},
    "sun": {},
    "moon": {}
  }
}
```
:::

- **答**：正在开发类似雾效的标识符系统！注意届时需要更新现有PBR包，我们会提供迁移指南。

## 维度专属配置

- **问**：能否按维度配置PBR纹理？比如不同维度点光源颜色不同。
- **答**：正在开发按生物群系配置功能，这将间接支持维度专属设置。同时也在研究自定义生物群系/维度的延迟渲染应用。

## 官方PBR资源包

- **问**：Mojang会发布官方PBR资源包吗？自制PBR材质工程量太大。
- **答**：暂无分享内部测试包的打算，但可通过全局光照文件为无专属材质集的对象设置默认值。

## 实时大气预览

- **问**：当前调整大气配置需反复重载世界，能否开发实时预览工具？
- **答**：我们理解开发者的痛点！计划将延迟预览深度集成至基岩版编辑器，实现实时编辑反馈。

## 宣传片计划

- **问**：会有官方宣传片吗？
- **答**：目前专注于功能开发，但欢迎社区制作宣传片！我们经常在YouTube搜索最新更新视频和教程😄

## 跨日关键帧

- **问**：能否实现跨多天的关键帧控制？比如根据月相调整光照。
- **答**：短期内无扩展关键帧周期计划，但月相关联的创意非常棒！

（翻译完成）